#{extends 'main.html' /} 
#{set title:'Cadastro de Produto' /}

<section class="login_box_area section-margin" style="margin-top: 50px;">
	<div class="container" id="registrar">
		<div class="row justify-content-center">
			<div class="col-lg-6">

				<div class="login_form_inner register_form_inner p-4 shadow-sm" 
					style="border-radius: 10px;">

					<h3 class="text-center mb-4">Cadastrar Produto</h3>

					<form class="row login_form" action="@{Produtos.salvar}" 
						id="register_form" enctype="multipart/form-data" method="post">

						<input type="hidden" name="produto.id" value="${p?.id}" /> 
						#{form @Produtos.salvar()}

						<div class="col-md-12 form-group mb-3">
							<input type="text" class="form-control" 
								name="produto.nomeProduto"
								placeholder="Nome do produto"
								value="${flash['produto.nomeProduto'] ? flash['produto.nomeProduto'] : p?.nomeProduto}">
							<span class="error small text-danger">#{error 'produto.nomeProduto' /}</span>
						</div>

						<div class="col-md-12 form-group mb-3">
							<input type="text" class="form-control"
								name="produto.preco" placeholder="Preço"
								value="${flash['produto.preco'] ? flash['produto.preco'] : p?.preco}">
							<span class="error small text-danger">#{error 'produto.preco' /}</span>
						</div>

						<div class="col-md-12 form-group mb-3">
							<input type="number" class="form-control"
								name="produto.quantidade" placeholder="Quantidade"
								value="${flash['produto.quantidade'] ? flash['produto.quantidade'] : p?.quantidade}">
							<span class="error small text-danger">#{error 'produto.quantidade' /}</span>
						</div>

						<div class="col-md-12 form-group mb-3">
							<label class="form-label fw-semibold">Categoria</label>
							<select class="form-select form-control" name="produto.categoria.id">
								<option value="" disabled selected>Selecione uma categoria</option>
								#{list items:categorias, as:'c'}
									<option value="${c.id}">${c.categoria}</option>
								#{/list}
							</select>
						</div>

						<div class="col-md-12 form-group mb-4">
							<label class="form-label fw-semibold">Imagem do produto</label>
							<input type="file" class="form-control" name="foto">
							<span class="error small text-danger">#{error 'produto.foto' /}</span>
						</div>

						<div class="col-md-12 form-group">
							<button type="submit"
								class="button button-register w-100">
								${p ? 'Salvar alterações' : 'Cadastrar produto'}
							</button>
						</div>

						#{/form}
					</form>
				</div>

			</div>
		</div>
	</div>
</section>
